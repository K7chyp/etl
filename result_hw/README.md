# ETL Pipeline with Airflow, MongoDB, PostgreSQL and ClickHouse

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ETL-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Airflow. –í–∫–ª—é—á–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∏—Ç—Ä–∏–Ω.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ MongoDB –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –≤ PostgreSQL –∫–∞–∂–¥—ã–π —á–∞—Å
- **–°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∏—Ç—Ä–∏–Ω** –≤ ClickHouse –µ–∂–µ–¥–Ω–µ–≤–Ω–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker 20.10+
- Docker Compose 2.0+

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone https://github.com/K7chyp/etl.git
cd result_hw
docker-compose up --build
```

–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Ä—Ç—ã:

- Airflow UI: http://localhost:8080
- PostgreSQL: 5432
- MongoDB: 27017
- ClickHouse: 8123


### üîÑ –ö–∞—Å—Ç–æ–º–Ω—ã–µ DAG–∏
## 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö  
**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç  
**–ó–∞–¥–∞—á–∏**:  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π  
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∫–∏  
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π  

## 2. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –≤ PostgreSQL  
**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —á–∞—Å  
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:  
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤  
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è JSON-–¥–∞–Ω–Ω—ã—Ö  
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —Ä–µ—Ç—Ä–∞—è–º–∏  

## 3. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã  
**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 00:00  
**–°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:  
- `user_activity_daily`  
- `device_usage_stats`  
- `support_performance`  

# üì∏ –ö–∞—Ä—Ç–∏–Ω–∫–∏

## Airflow + Docker
![alt text](image-1.png)
![alt text](image.png)
## MongoDB
### support_tickets
![alt text](image-2.png)